<!doctype html>
<html lang="it">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="apple-touch-icon" href="/icon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#6366f1">
  <title>DigiShoppingCard - Il tuo portafoglio digitale privato</title>
  <meta name="description"
    content="Gestisci le tue carte fedelt√† con velocit√† e privacy. Scansione rapida, geolocalizzazione e backup cifrato.">
  <meta name="keywords" content="loyalty cards, carte fedelt√†, digitalizzatore carte, privacy, shopping app">

  <!-- Social Media Tags -->
  <meta property="og:title" content="DigiShoppingCard App">
  <meta property="og:description" content="Digitalizza le tue carte fedelt√† in totale sicurezza.">
  <meta property="og:image" content="https://skinny1973.github.io/digishoppingcard/hero.png">
  <meta property="og:type" content="website">
</head>

<body>
  <div id="app">
    <header>
      <div class="header-titles">
        <h1 data-i18n="app_title">DigiShoppingCard</h1>
        <span class="header-subtitle" data-i18n="app_subtitle">Le mie carte</span>
      </div>
      <button id="settingsBtn" class="icon-btn" aria-label="Impostazioni">
        <i data-lucide="settings"></i>
      </button>
    </header>

    <main class="container">
      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Cerca carta..." data-i18n-placeholder="search_placeholder">
        <i data-lucide="search" class="search-icon"></i>
      </div>

      <div id="cardGrid" class="card-grid">
        <!-- Cards will be rendered here -->
      </div>

      <div id="emptyState" class="empty-state">
        <div class="empty-state-icon">ü™™</div>
        <p>Non hai ancora aggiunto nessuna carta.</p>
        <p>Tocca il tasto + per iniziare!</p>
      </div>
    </main>

    <button id="addCardBtn" class="fab" aria-label="Aggiungi Carta" data-i18n-aria="aria_add_card">
      <span id="fabIcon">+</span>
    </button>

    <!-- Modal for Adding/Editing Card -->
    <div id="addModal" class="modal-overlay">
      <div class="modal-content">
        <button class="close-modal" id="closeAddModal">‚úï</button>
        <h2 data-i18n="new_card_title">Nuova Carta</h2>

        <div class="form-group">
          <div id="reader"></div>
          <div id="uploadStatus"></div>
          <div class="btn-group">
            <button id="startScanBtn" class="btn btn-secondary">
              <span data-i18n="scan_btn">Scansiona Barcode</span>
            </button>
          </div>
        </div>



        <div class="form-group">
          <label for="storeName" data-i18n="store_name_label">Nome Negozio</label>
          <input type="text" id="storeName" placeholder="Es. Esselunga, Carrefour..."
            data-i18n-placeholder="store_name_placeholder">
        </div>

        <div class="form-group">
          <label for="cardCategory" data-i18n="category_label">Categoria</label>
          <select id="cardCategory" class="language-select">
            <option value="other" data-i18n="cat_other">Altro</option>
            <option value="groceries" data-i18n="cat_groceries">Spesa</option>
            <option value="fashion" data-i18n="cat_fashion">Abbigliamento</option>
            <option value="tech" data-i18n="cat_tech">Elettronica</option>
            <option value="health" data-i18n="cat_health">Salute</option>
            <option value="home" data-i18n="cat_home">Casa</option>
          </select>
        </div>

        <div class="form-group">
          <label for="barcodeValue" data-i18n="barcode_label">Codice Barcode</label>
          <input type="text" id="barcodeValue" placeholder="Inserisci il codice manualmente"
            data-i18n-placeholder="barcode_placeholder">
        </div>

        <div class="btn-group">
          <button id="saveCardBtn" class="btn btn-primary" data-i18n="save_btn">Salva Carta</button>
        </div>
      </div>
    </div>

    <!-- Modal for Fullscreen View -->
    <div id="viewModal" class="modal-overlay">
      <div class="modal-content fullscreen-card">
        <button class="close-modal" id="closeViewModal">‚úï</button>

        <div class="card-detail-info">
          <div id="viewStoreName" class="card-detail-name">Nome Negozio</div>
          <div id="viewBarcodeValue" class="card-detail-code">123456789</div>
        </div>

        <div id="barcodeCanvasContainer" class="barcode-display">
          <!-- Barcode SVG/Canvas will be here -->
        </div>

        <div class="btn-group-view">
          <button id="shareCardBtn" class="btn btn-primary" data-i18n="share_btn">
            <i data-lucide="share-2"></i> Condividi
          </button>
          <button id="closeViewBtn" class="btn btn-secondary" data-i18n="close_btn">Chiudi</button>
          <button id="deleteCardBtn" class="btn btn-danger" data-i18n="delete_btn">Elimina Carta</button>
        </div>
      </div>
    </div>
    <!-- Modal for Sharing QR -->
    <div id="shareModal" class="modal-overlay">
      <div class="modal-content">
        <button class="close-modal" id="closeShareModal">‚úï</button>
        <h2 data-i18n="share_title">Condividi Carta</h2>
        <p class="settings-desc" data-i18n="share_desc">Fai inquadrare questo QR all'altra persona con la sua
          DigiShoppingCard.</p>

        <div id="shareQRContainer" class="share-qr-display">
          <!-- QR Code will be here -->
        </div>

        <div class="btn-group">
          <button id="closeShareBtn" class="btn btn-secondary" data-i18n="close_btn">Chiudi</button>
        </div>
      </div>
    </div>
    <!-- Modal for Settings (Backup/Restore) -->
    <div id="settingsModal" class="modal-overlay">
      <div class="modal-content">
        <button class="close-modal" id="closeSettingsModal">‚úï</button>
        <h2 data-i18n="settings_title">Impostazioni</h2>

        <div class="settings-section">
          <h3 data-i18n="language_section">Lingua</h3>
          <select id="languageSelect" class="language-select" aria-label="Seleziona Lingua"
            data-i18n-aria="aria_select_language">
            <option value="it">Italiano</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="fr">Fran√ßais</option>
            <option value="de">Deutsch</option>
            <option value="pt">Portugu√™s</option>
            <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="id">Bahasa Indonesia</option>
          </select>
        </div>

        <p class="settings-desc" data-i18n="settings_desc">Gestisci i tuoi dati in locale o esportali per sicurezza.</p>
        <div class="settings-section">
          <h3 data-i18n="backup_section">Backup e Ripristino</h3>
          <p data-i18n="backup_desc">Esporta i tuoi dati su iCloud o Google Drive salvando il file sul dispositivo. Puoi
            ripristinarli caricando lo stesso file.</p>

          <div class="btn-group">
            <button id="exportBtn" class="btn btn-primary">
              <i data-lucide="download"></i> <span data-i18n="export_btn">Esporta Backup (.json)</span>
            </button>
            <label for="importFile" class="btn btn-secondary">
              <i data-lucide="upload"></i> <span data-i18n="import_btn">Importa Backup (.json)</span>
              <input type="file" id="importFile" accept=".json" class="hidden-input">
            </label>
          </div>
        </div>

        <div class="settings-info">
          <p>Versione 1.3.0</p>
          <div class="btn-group">
            <button id="infoBtn" class="btn btn-secondary btn-full">
              <i data-lucide="info"></i> <span data-i18n="info_btn">Informazioni e Guida</span>
            </button>
          </div>

          <p class="storage-info" data-i18n="storage_info">Tutti i dati sono salvati solo sul tuo dispositivo.</p>
          <p class="privacy-notice" data-i18n="privacy_note">La geolocalizzazione utilizza OpenStreetMap per verificare
            i
            negozi vicini. Nessun dato identificativo viene inviato.</p>
        </div>
      </div>
    </div>

    <!-- Modal for Info & Guide -->
    <div id="infoModal" class="modal-overlay">
      <div class="modal-content info-modal">
        <h2 data-i18n="info_title">Guida DigiShoppingCard</h2>

        <div class="info-scroll-container">
          <p class="about-text" data-i18n="about_app">Una Progressive Web App (PWA) moderna, veloce e sicura per
            digitalizzare le tue carte fedelt√†.</p>
          <p class="license-badge" data-i18n="licence_text">Progetto Open Source con licenza GNU GPLv3</p>

          <section class="info-section">
            <h3 data-i18n="feat_title">‚ú® Caratteristiche</h3>
            <div class="feat-item">
              <strong data-i18n="feat_scan_title">Scansione Rapida</strong>
              <p data-i18n="feat_scan_text">Aggiungi carte scansionando il codice a barre con la fotocamera.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_search_title">Ricerca Rapida</strong>
              <p data-i18n="feat_search_text">Trova subito la tua carta digitando il nome del negozio nella barra di
                ricerca.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_cat_title">Categorie</strong>
              <p data-i18n="feat_cat_text">Organizza la tua collezione suddividendo le carte per Spesa, Moda,
                Tecnologia, Salute e altro.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_share_title">Condivisione QR (QR Transfer)</strong>
              <p data-i18n="feat_share_text">Condividi istantaneamente le tue carte con familiari e amici generando un
                codice QR che pu√≤ essere scansionato direttamente dall'app di un altro utente.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_geo_title">Geolocalizzazione Intelligente</strong>
              <p data-i18n="feat_geo_text">L'app impara dove usi le tue carte e te le mostra in cima alla lista quando
                sei vicino al negozio.</p>
              <p class="feat-note" data-i18n="geo_note">Nota: La precisione della geolocalizzazione pu√≤ diminuire
                all'interno di grandi edifici o centri commerciali.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_design_title">Design Premium</strong>
              <p data-i18n="feat_design_text">Interfaccia ottimizzata per smartphone con dark mode, animazioni fluide e
                icone nitide.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="feat_offline_title">Funzionamento Offline</strong>
              <p data-i18n="feat_offline_text">Essendo una PWA, funziona anche senza connessione internet una volta
                installata.</p>
            </div>
          </section>

          <section class="info-section">
            <h3 data-i18n="sec_title">üîí Sicurezza e Privacy</h3>
            <p class="sec-intro" data-i18n="sec_desc">L'applicazione √® stata progettata seguendo il principio della
              Privacy by Design:</p>
            <div class="feat-item">
              <strong data-i18n="sec_local_title">Local-First</strong>
              <p data-i18n="sec_local_text">Tutti i dati delle tue carte sono salvati esclusivamente nel localStorage
                del tuo browser. Nessun dato viene mai inviato a server centrali.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="sec_backup_title">Backup Cifrato</strong>
              <p data-i18n="sec_backup_text">I backup esportati possono essere protetti con cifratura AES-256-GCM. I
                dati sono in chiaro solo sul tuo dispositivo.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="sec_transp_title">Trasparenza</strong>
              <p data-i18n="sec_transp_text">La geolocalizzazione utilizza OpenStreetMap per la verifica dei negozi. Non
                vengono inviati dati identificativi dell'utente a terze parti.</p>
            </div>
            <div class="feat-item">
              <strong data-i18n="sec_gdpr_title">GDPR Ready</strong>
              <p data-i18n="sec_gdpr_text">L'app non effettua profilazione, non richiede registrazione e garantisce
                all'utente il pieno controllo dei propri dati.</p>
            </div>
          </section>
        </div>

        <div class="btn-group mt-20">
          <a href="https://skinny1973.github.io/digishoppingcard/landing.html" target="_blank" rel="noopener"
            class="btn btn-secondary btn-full btn-link" data-i18n="visit_website">
            <i data-lucide="external-link"></i> Visita il sito ufficiale
          </a>
          <button id="closeInfoBtn" class="btn btn-primary btn-full" data-i18n="close_btn">Chiudi</button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="src/main.js"></script>
</body>

</html>